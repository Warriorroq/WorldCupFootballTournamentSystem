<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Football tournament</title>
        <link rel="stylesheet" href="css/style.css">
        <script src="eel.js"></script>
    </head>
        <body>
            <main>
                <div id = "startDiv">
                    <input type='button' class='start' value='show' onclick='javascript:startFunc();' />
                </div>
                <div id = "tournament-net">
                    <div id = "stage-1">
                        <div class = "group">
                            Group A
                            <div  id = "team">
                                <img src="" alt="Avatar" class = "teamImg">
                                <select name="teams" class="teamsSelect"></select>
                            </div>
                            <div  id = "team">
                                <img src="" alt="Avatar" class = "teamImg">
                                <select name="teams" class="teamsSelect"></select>
                            </div>
                        </div>
                        <br><br><br><br><br><br><br><br>
                        <div class = "group">
                            Group B
                            <div  id = "team">
                                <img src="" alt="Avatar" class = "teamImg">
                                <select name="teams" class="teamsSelect"></select>
                            </div>
                            <div  id = "team">
                                <img src="" alt="Avatar" class = "teamImg">
                                <select name="teams" class="teamsSelect"></select>
                            </div>
                        </div>
                    </div>
                </div>    
            </main>
        </body>
    <script>
        const countries = new Map();
        function startFunc(){
            document.getElementById("startDiv").style.display = 'none';
            loadTeams();
        }

        function loadTeams(){
            const collection = document.querySelectorAll("[id=team]");
            for (const team of collection) {
                let selector = team.getElementsByClassName("teamsSelect")[0];
                let image = team.getElementsByClassName("teamImg")[0];
                selector.addEventListener("change", function() {
                    image.src = countries.get(this.value);
                });
                for (let [key, value] of countries) {
                    var opt = document.createElement('option');
                    opt.value = key;
                    opt.innerHTML = key;
                    selector.appendChild(opt);
                }
            }
        }        
        eel.readAllCountryImages()(function(result){
            result.forEach(element => countries.set(element[0], element[1]));
        });
    
    </script>
</html>